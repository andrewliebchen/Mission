<template name="tasks">
  <section class="tasks">
    {{> tasksToolbar}}
    {{> tasksBoard}}
  </section>
</template>

<template name="tasksBoard">
  <div class="columns">
    <div class="column">
      <header class="column__header">
        <h4>To do</h4>
      </header>
      <div class="column__body">
        {{#each todoTask}}
          {{> task buttonLabel="Start" taskId=_id assignedTo=assignedTo}}
        {{/each}}
      </div>
    </div>
    <div class="column">
      <header class="column__header">
        <h4>Doing</h4>
      </header>
      <div class="column__body">
        {{#each doingTask}}
          {{> task buttonLabel="Finish" taskId=_id assignedTo=assignedTo}}
        {{/each}}
        <!-- <strong class="null">No items</strong> -->
      </div>
    </div>
    <div class="column">
      <header class="column__header">
        <h4>Done</h4>
      </header>
      <div class="column__body">
        {{#each doneTask}}
          {{> task buttonLabel="Accept" taskId=_id assignedTo=assignedTo}}
        {{/each}}
        <!-- <strong class="null">No items</strong> -->
      </div>
    </div>
    <div class="column">
      <header class="column__header">
        <h4>Accepted</h4>
      </header>
      <div class="column__body">
        {{#each acceptedTask}}
          {{> task buttonLabel="Reject" taskId=_id assignedTo=assignedTo}}
        {{/each}}
        <!-- <strong class="null">No items</strong> -->
      </div>
    </div>
  </div>
</template>

<template name="tasksToolbar">
  <header class="toolbar">
    <div class="toolbar__section">
      <a class="boards-toggle">â§‰ Current tasks</a>
    </div>
    <div class="toolbar__section">
      {{#each boardUser}}
        {{#if this}}
          <div class="block medium mtr_filter-board-users{{#if isSelected}} is-selected{{/if}}">
            <img src="{{this.profile.avatar_url}}">
          </div>
        {{/if}}
      {{/each}}
      <a class="block medium">+</a>
    </div>
    <div class="toolbar__section">
      <div class="search">Search</div>
    </div>
  </header>
</template>

<template name="task">
  {{#if isNotFiltered}}
    <div class="task status_{{../status}}" data-assigned="{{../assignedTo}}">
      <div class="task__body">
        <div class="task__status-bar"></div>
        <code class="pull-right">{{../number}}</code>
        <p class="task__title">
          {{../title}}
        </p>
      </div>
      <footer class="task__footer">
        <div class="task__container">
          <div class="block small"><img src="{{avatarUrl}}"></div>
        </div>
        <button class="task__action mtr_status-increment">{{buttonLabel}}</button>
      </footer>
    </div>
  {{/if}}
</template>
