<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mission</title>
</head>

<template name="application">
  <div class="wrapper">
    {{> header}}
    {{> yield}}
    {{> newItem}}
  </div>
</template>

<template name="loading">
  Loading
</template>

<template name="addItem">
  <a class="block large add-item mtr_add-item">+</a>
</template>

<template name="newItem">
  {{#if activeNewItem}}
    <div class="new-item">
      <nav class="new-item__tabs">
        <a class="new-item__tab is-selected">Add theme</a>
        <a class="new-item__tab">Add task</a>
      </nav>
      <div class="new-item__body">
        <form>
          <label>Title</label>
          <input type="text" placeholder="As an admin, I'd like to...">
          <label>Description</label>
          <textarea placeholder="More detail about the task"></textarea>
          <input type="submit">
          <button class="mtr_close-new-item">Cancel</button>
        </form>
      </div>
    </div>
  {{/if}}
</template>

<template name="home">
  <section class="themes container">
    {{> themes}}
    {{> addItem}}
  </section>
</template>

<template name="header">
  <header class="header">
    <div class="container">
      <nav class="nav">
        <a href="/" class="brand"><strong>MISSION</strong></a>
        <a href="/">Themes</a>
        <a>Tasks</a>
        <a>Teams</a>
      </nav>
      <a class="user">Andrew Liebchen</a>
    </div>
  </header>
</template>

<template name="themes">
  {{#each theme}}
    <div class="theme{{#if isActive}} is-active{{/if}}">
      {{> themeContent}}
    </div>
  {{/each}}
</template>

<template name="themeContent">
  <a class="theme__priority mtr_upvote">
    <span class="theme__priority__arrow">▲</span>
    <span class="theme__priority__count">{{priorityCount}}</span>
  </a>
  <span class="mtr_show-theme">
    <div class="theme__body">
      <h2 class="theme__title">{{title}}</h2>
      <p class="theme__description">{{description}}</p>
    </div>
    {{> tasksThumb}}
  </span>
</template>

<template name="tasksThumb">
  <div class="task-thumb">
    <div class="task-thumb__column" style="height:40px;">4</div>
    <div class="task-thumb__column" style="height:50px;">5</div>
    <div class="task-thumb__column" style="height:30px;">3</div>
    <div class="task-thumb__column" style="height:10px;">1</div>
  </div>
</template>

<template name="theme">
  <header class="theme-header">
    <div class="container">
      {{> themes}}
      <!-- <nav class="tabs">
        <a class="tab is-selected">Tasks</a>
        <a class="tab">Notes</a>
      </nav> -->
    </div>
    <div class="pagination">
      <a class="pagination__link prev">❮</a>
      <a href="/" class="pagination__link menu">☰</a>
      <a class="pagination__link next">❯</a>
    </div>
    {{> addItem}}
  </header>
  <section class="tasks">
    {{> toolbar}}
    {{> tasks}}
  </section>
</template>

<template name="toolbar">
  <header class="toolbar">
    <div class="toolbar__section">
      <a class="boards-toggle">⧉ Current tasks</a>
    </div>
    <div class="toolbar__section">
      <div class="block medium">AL</div>
      <div class="block medium">CD</div>
      <div class="block medium">PD</div>
      <div class="block medium">TD</div>
      <a class="block medium">+</a>
    </div>
    <div class="toolbar__section">
      <div class="search">Search</div>
    </div>
  </header>
</template>

<template name="tasks">
  <div class="columns">
    <div class="column">
      <header class="column__header">
        <h4>To do</h4>
      </header>
      <div class="column__body">
        {{#each todoTask}}
          {{> task buttonLabel="Start"}}
        {{/each}}
      </div>
    </div>
    <div class="column">
      <header class="column__header">
        <h4>Doing</h4>
      </header>
      <div class="column__body">
        {{#each doingTask}}
          {{> task buttonLabel="Finish"}}
        {{/each}}
        <!-- <strong class="null">No items</strong> -->
      </div>
    </div>
    <div class="column">
      <header class="column__header">
        <h4>Done</h4>
      </header>
      <div class="column__body">
        {{#each doneTask}}
          {{> task buttonLabel="Accept"}}
        {{/each}}
        <!-- <strong class="null">No items</strong> -->
      </div>
    </div>
    <div class="column">
      <header class="column__header">
        <h4>Accepted</h4>
      </header>
      <div class="column__body">
        {{#each acceptedTask}}
          {{> task buttonLabel="Reject"}}
        {{/each}}
        <!-- <strong class="null">No items</strong> -->
      </div>
    </div>
  </div>
</template>

<template name="task">
  <div class="task status_{{../status}}">
    <div class="task__body">
      <div class="task__status-bar"></div>
      <code class="pull-right">{{../number}}</code>
      <p class="task__title">
        {{../title}}
      </p>
    </div>
    <footer class="task__footer">
      <div class="task__container">
        <div class="block small"><span>AL</span></div>
      </div>
      <a class="task__action mtr_status-increment" id="{{../_id}}">{{buttonLabel}}</a>
    </footer>
  </div>
</template>
